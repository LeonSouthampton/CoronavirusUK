{"version":3,"sources":["pages/Map/index.js","routes/index.js","index.js"],"names":["World","useEffect","fetch","then","res","json","userData","chart","Chart","container","autoFit","width","height","padding","tooltip","showTitle","showMarkers","shared","scale","longitude","sync","latitude","axis","legend","position","ds","DataSet","worldMap","createView","source","JSONMap","type","worldMapView","data","rows","polygon","style","fill","stroke","lineWidth","max","map","item","value","console","log","userDv","transform","geoDataView","field","as","callback","obj","trend","userView","alias","color","fillOpacity","animate","leave","animation","interaction","render","id","margin","renderRoute","props","component","Maps","ReactDOM","document","getElementById"],"mappings":"kmhNA8IeA,EAzID,WAiIZ,OAhIAC,qBAAU,WACRC,MAAM,0BACHC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAG,GACJ,IAAMC,EAAQ,IAAIC,QAAM,CACtBC,UAAW,YACXC,SAAS,EACTC,MAAO,IACPC,OAAQ,IACRC,QAAS,CAAC,GAAI,EAAG,GAAI,OAEvBN,EAAMO,QAAQ,CACZC,WAAW,EACXC,aAAa,EACbC,QAAQ,IAGVV,EAAMW,MAAM,CACVC,UAAW,CACTC,MAAM,GAERC,SAAU,CACRD,MAAM,KAGVb,EAAMe,MAAK,GACXf,EAAMgB,OAAO,QAAS,CACpBC,SAAU,SAIZ,IAAMC,EAAK,IAAIC,IACTC,EAAWF,EAAGG,WAAW,QAAQC,OAAOC,EAAS,CACrDC,KAAM,YAEFC,EAAezB,EAAMqB,aAC3BI,EAAaC,KAAKN,EAASO,MAC3BF,EAAalB,SAAQ,GACrBkB,EACGG,UACAX,SAAS,sBACTY,MAAM,CACLC,KAAM,OACNC,OAAQ,OACRC,UAAW,IAYf,IAAIC,EAAM,EACVlC,EAASmC,KAAI,SAAAC,GACPA,EAAKC,MAAQH,IACfA,EAAME,EAAKC,UAIfC,QAAQC,IAAIL,GAEZ,IAAMM,EAASrB,EACZG,aACAC,OAAOvB,GACPyC,UAAU,CACTC,YAAarB,EACbsB,MAAO,OACPlB,KAAM,aACNmB,GAAI,CAAC,YAAa,cAEnBH,UAAU,CACThB,KAAM,MACNoB,SAAU,SAAAC,GAAQ,IACRT,EAAUS,EAAVT,MAgBR,OAfIA,GAASH,EAAM,IACjBY,EAAIC,MAAJ,+BAAqBb,EAAM,EAA3B,WAEEG,GAAgB,EAANH,EAAW,GAAKG,EAAQH,EAAM,IAC1CY,EAAIC,MAAJ,+BAAqBb,EAAM,EAA3B,uCAAuCA,EAAM,EAA7C,WAEEG,GAAgB,EAANH,EAAW,GAAKG,EAAe,EAANH,EAAW,IAChDY,EAAIC,MAAJ,+BAAqBb,EAAM,EAA3B,uCAA8C,EAANA,EAAW,EAAnD,WAEEG,GAAgB,EAANH,EAAW,GAAKG,EAAe,EAANH,EAAW,IAChDY,EAAIC,MAAJ,+BAAqBb,EAAM,EAA3B,uCAA8C,EAANA,EAAW,EAAnD,WAEEG,GAAgB,EAANH,EAAW,GAAKG,EAAe,EAANH,EAAW,IAChDY,EAAIC,MAAJ,+BAA4B,EAANb,EAAW,EAAjC,WAEKY,KAGPE,EAAW/C,EAAMqB,aACvB0B,EAASrB,KAAKa,EAAOZ,MACrBoB,EAASpC,MAAM,CACbmC,MAAO,CACLE,MAAO,sDAGXD,EACGnB,UACAX,SAAS,sBACTgC,MAAM,QAAS,CACd,UACA,UACA,UACA,UACA,YAED1C,QAAQ,cACRsB,MAAM,CACLqB,YAAa,MAEdC,QAAQ,CACPC,MAAO,CACLC,UAAW,cAGjBN,EAASO,YAAY,kBAErBtD,EAAMuD,cAET,IAGD,yBACEC,GAAG,YACH3B,MAAO,CAAEzB,MAAO,QAASC,OAAQ,QAASoD,OAAQ,WCvFzCC,EApBK,SAAAC,GAClB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KAWE,kBAAC,IAAD,CAAOC,UAAWC,OCxC1BC,IAASP,OAAO,kBAAC,EAAD,MAAYQ,SAASC,eAAe,W","file":"static/js/main.946c8178.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport DataSet from \"@antv/data-set\";\nimport { Chart } from \"@antv/g2\";\nimport JSONMap from \"./map.json\";\n\nconst World = () => {\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:8888/\")\n      .then(res => res.json())\n      .then(userData => {\n        const chart = new Chart({\n          container: \"container\",\n          autoFit: false,\n          width: 550,\n          height: 720,\n          padding: [10, 0, 10, 100]\n        });\n        chart.tooltip({\n          showTitle: false,\n          showMarkers: false,\n          shared: true\n        });\n        // 同步度量\n        chart.scale({\n          longitude: {\n            sync: true\n          },\n          latitude: {\n            sync: true\n          }\n        });\n        chart.axis(false);\n        chart.legend(\"trend\", {\n          position: \"left\"\n        });\n\n        // 绘制世界地图背景\n        const ds = new DataSet();\n        const worldMap = ds.createView(\"back\").source(JSONMap, {\n          type: \"GeoJSON\"\n        });\n        const worldMapView = chart.createView();\n        worldMapView.data(worldMap.rows);\n        worldMapView.tooltip(false);\n        worldMapView\n          .polygon()\n          .position(\"longitude*latitude\")\n          .style({\n            fill: \"#fff\",\n            stroke: \"#ccc\",\n            lineWidth: 1\n          });\n\n        // 可视化用户数据\n        // const userData = [\n        //   { name: \"Wakefield\", value: 100 },\n        //   { name: \"Leeds\", value: 80 },\n        //   { name: \"Bradford\", value: 60 },\n        //   { name: \"Calderdale\", value: 40 },\n        //   { name: \"Kirklees\", value: 20 }\n        // ];\n\n        let max = 0;\n        userData.map(item => {\n          if (item.value > max) {\n            max = item.value;\n          }\n        });\n\n        console.log(max);\n\n        const userDv = ds\n          .createView()\n          .source(userData)\n          .transform({\n            geoDataView: worldMap,\n            field: \"name\",\n            type: \"geo.region\",\n            as: [\"longitude\", \"latitude\"]\n          })\n          .transform({\n            type: \"map\",\n            callback: obj => {\n              const { value } = obj;\n              if (value <= max / 5) {\n                obj.trend = `小于20%（${max / 5}）`;\n              }\n              if (value <= (max * 2) / 5 && value > max / 5) {\n                obj.trend = `小于40%（${max / 5}）,大于20%（${max / 5}）`;\n              }\n              if (value <= (max * 3) / 5 && value > (max * 2) / 5) {\n                obj.trend = `小于60%（${max / 5}）,大于40%（${(max * 2) / 5}）`;\n              }\n              if (value <= (max * 4) / 5 && value > (max * 3) / 5) {\n                obj.trend = `小于80%（${max / 5}）,大于60%（${(max * 3) / 5}）`;\n              }\n              if (value <= (max * 5) / 5 && value > (max * 4) / 5) {\n                obj.trend = `大于80%（${(max * 4) / 5}）`;\n              }\n              return obj;\n            }\n          });\n        const userView = chart.createView();\n        userView.data(userDv.rows);\n        userView.scale({\n          trend: {\n            alias: \"占最大值的百分比\"\n          }\n        });\n        userView\n          .polygon()\n          .position(\"longitude*latitude\")\n          .color(\"trend\", [\n            \"#610b00\",\n            \"#ad2102\",\n            \"#fa541c\",\n            \"#ff9c6e\",\n            \"#ffd8bf\"\n          ])\n          .tooltip(\"name*trend\")\n          .style({\n            fillOpacity: 0.85\n          })\n          .animate({\n            leave: {\n              animation: \"fade-out\"\n            }\n          });\n        userView.interaction(\"element-active\");\n\n        chart.render();\n      });\n  }, []);\n\n  return (\n    <div\n      id=\"container\"\n      style={{ width: \"550px\", height: \"720px\", margin: \"auto\" }}\n    ></div>\n  );\n};\n\nexport default World;\n","import React from \"react\";\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport Page404 from '@/pages/404';\nimport Maps from \"@/pages/Map\";\n\nimport routeMenu from \"./routeMenu\";\n\nconst Redirects = ({ path, redirect }) => (\n  <Redirect key={path} exact from={path} to={redirect} />\n);\n\nconst Routes = (Layout, props, i, { path, Component }) => (\n  <Route\n    exact\n    key={path}\n    path={path}\n    render={() => (\n      <>\n        {Layout ? (\n          <Layout key={i.toString()} {...props}>\n            <Component />\n          </Layout>\n        ) : (\n          <Component key={i.toString()} />\n        )}\n      </>\n    )}\n  />\n);\n\nconst renderRoute = props => {\n  return (\n    <BrowserRouter>\n      <Switch>\n        {/* {routeMenu.map(({ layout: Layout, routes }, i) => {\n          return (\n            routes &&\n            routes.map(({ path, component: Component, redirect }) => {\n              return redirect\n                ? Redirects({ path, redirect })\n                : Routes(Layout, props, i, { path, Component });\n            })\n          );\n        })} */}\n        <Route component={Maps} />\n      </Switch>\n    </BrowserRouter>\n  );\n};\n\nexport default renderRoute;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Routes from \"@/routes\";\n\nReactDOM.render(<Routes />, document.getElementById(\"root\"));\n"],"sourceRoot":""}